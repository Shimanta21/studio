(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{44838:(e,s,t)=>{"use strict";t.d(s,{SQ:()=>x,_2:()=>u,lp:()=>h,mB:()=>p,rI:()=>o,ty:()=>m});var a=t(95155),l=t(12115),r=t(89615),n=t(73158),d=t(10518),i=t(70154),c=t(59434);let o=r.bL,m=r.l9;r.YJ,r.ZL,r.Pb,r.z6,l.forwardRef((e,s)=>{let{className:t,inset:l,children:d,...i}=e;return(0,a.jsxs)(r.ZP,{ref:s,className:(0,c.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...i,children:[d,(0,a.jsx)(n.A,{className:"ml-auto"})]})}).displayName=r.ZP.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.G5,{ref:s,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})}).displayName=r.G5.displayName;let x=l.forwardRef((e,s)=>{let{className:t,sideOffset:l=4,...n}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{ref:s,sideOffset:l,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});x.displayName=r.UC.displayName;let u=l.forwardRef((e,s)=>{let{className:t,inset:l,...n}=e;return(0,a.jsx)(r.q7,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...n})});u.displayName=r.q7.displayName,l.forwardRef((e,s)=>{let{className:t,children:l,checked:n,...i}=e;return(0,a.jsxs)(r.H_,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),l]})}).displayName=r.H_.displayName,l.forwardRef((e,s)=>{let{className:t,children:l,...n}=e;return(0,a.jsxs)(r.hN,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(i.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=r.hN.displayName;let h=l.forwardRef((e,s)=>{let{className:t,inset:l,...n}=e;return(0,a.jsx)(r.JU,{ref:s,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",t),...n})});h.displayName=r.JU.displayName;let p=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...l})});p.displayName=r.wv.displayName},60011:(e,s,t)=>{Promise.resolve().then(t.bind(t,69250))},69250:(e,s,t)=>{"use strict";t.d(s,{default:()=>Z});var a=t(95155),l=t(12115),r=t(62177),n=t(90221),d=t(55594),i=t(67785),c=t(30285),o=t(62523),m=t(59409),x=t(85127),u=t(66695),h=t(54165),p=t(62278),f=t(59434);let j=p.bL;p.l9;let y=p.ZL,N=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(p.hJ,{className:(0,f.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l,ref:s})});N.displayName=p.hJ.displayName;let g=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsxs)(y,{children:[(0,a.jsx)(N,{}),(0,a.jsx)(p.UC,{ref:s,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l})]})});g.displayName=p.UC.displayName;let v=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};v.displayName="AlertDialogHeader";let b=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,f.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};b.displayName="AlertDialogFooter";let w=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(p.hE,{ref:s,className:(0,f.cn)("text-lg font-semibold",t),...l})});w.displayName=p.hE.displayName;let C=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(p.VY,{ref:s,className:(0,f.cn)("text-sm text-muted-foreground",t),...l})});C.displayName=p.VY.displayName;let A=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(p.rc,{ref:s,className:(0,f.cn)((0,c.r)(),t),...l})});A.displayName=p.rc.displayName;let S=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(p.ZD,{ref:s,className:(0,f.cn)((0,c.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...l})});S.displayName=p.ZD.displayName;var R=t(44838),k=t(75937),z=t(14636),D=t(85511),_=t(75074),P=t(3561),I=t(75943),M=t(77223),E=t(51920),B=t(83343),J=t(83013);let H=["Medicines & Pet Foods","Vaccines","Accessories"],V=d.Ik({name:d.Yj().min(1,"Name is required."),category:d.Ie(e=>H.includes(e),"Invalid category"),source:d.Yj().optional(),price:d.au.number().min(0,"Price must be non-negative."),expiryDate:d.p6().optional()});function Z(){let{products:e,updateProduct:s,deleteProduct:t}=(0,i.n)(),[d,p]=(0,l.useState)(""),[y,N]=(0,l.useState)("All"),[Z,F]=(0,l.useState)(!1),[L,O]=(0,l.useState)(!1),[U,q]=(0,l.useState)(null),G=(0,r.mN)({resolver:(0,n.u)(V)});(0,l.useEffect)(()=>{U&&G.reset({name:U.name,category:U.category,source:U.source||"",price:U.price,expiryDate:U.expiryDate?(0,B.H)(U.expiryDate):void 0})},[U,G]);let Y=(0,l.useMemo)(()=>e.filter(e=>"All"===y||e.category===y).filter(e=>e.name.toLowerCase().includes(d.toLowerCase())),[e,d,y]),$=e=>{q(e),F(!0)},Q=e=>{q(e),O(!0)},T=async()=>{if(U)try{await t(U.id)}catch(e){}finally{O(!1),q(null)}};async function W(e){if(!U)return;let t={name:e.name,category:e.category,source:e.source,price:e.price};e.expiryDate&&(t.expiryDate=(0,J.GP)(e.expiryDate,"yyyy-MM-dd"));try{await s(U.id,t)}catch(e){}finally{F(!1),q(null)}}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Inventory Master"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 pt-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(_.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(o.p,{placeholder:"Search by product name...",value:d,onChange:e=>p(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(m.l6,{value:y,onValueChange:N,children:[(0,a.jsx)(m.bq,{className:"w-full md:w-[200px]",children:(0,a.jsx)(m.yv,{placeholder:"Filter by category"})}),(0,a.jsxs)(m.gC,{children:[(0,a.jsx)(m.eb,{value:"All",children:"All Categories"}),H.map(e=>(0,a.jsx)(m.eb,{value:e,children:e},e))]})]})]})]}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(x.XI,{children:[(0,a.jsx)(x.A0,{children:(0,a.jsxs)(x.Hj,{children:[(0,a.jsx)(x.nd,{children:"Product Name"}),(0,a.jsx)(x.nd,{children:"Category"}),(0,a.jsx)(x.nd,{children:"Batch Number"}),(0,a.jsx)(x.nd,{children:"Source (Supplier)"}),(0,a.jsx)(x.nd,{className:"text-right",children:"Stock in Hand"}),(0,a.jsx)(x.nd,{className:"text-right",children:"Items Sold"}),(0,a.jsx)(x.nd,{children:"Expiry Date"}),(0,a.jsx)(x.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(x.BF,{children:Y.length>0?Y.map(e=>(0,a.jsxs)(x.Hj,{children:[(0,a.jsx)(x.nA,{className:"font-medium",children:e.name}),(0,a.jsx)(x.nA,{children:e.category}),(0,a.jsx)(x.nA,{children:e.batchNumber}),(0,a.jsx)(x.nA,{children:e.source||"N/A"}),(0,a.jsx)(x.nA,{className:"text-right",children:e.stockInHand}),(0,a.jsx)(x.nA,{className:"text-right",children:e.itemsSold}),(0,a.jsx)(x.nA,{children:e.expiryDate||"N/A"}),(0,a.jsx)(x.nA,{className:"text-right",children:(0,a.jsxs)(R.rI,{children:[(0,a.jsx)(R.ty,{asChild:!0,children:(0,a.jsxs)(c.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,a.jsx)(P.A,{className:"h-4 w-4"})]})}),(0,a.jsxs)(R.SQ,{align:"end",children:[(0,a.jsxs)(R._2,{onClick:()=>$(e),children:[(0,a.jsx)(I.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Edit"})]}),(0,a.jsxs)(R._2,{onClick:()=>Q(e),className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:[(0,a.jsx)(M.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Delete"})]})]})]})})]},e.id)):(0,a.jsx)(x.Hj,{children:(0,a.jsx)(x.nA,{colSpan:8,className:"text-center h-24",children:"No products found."})})})]})})})]}),(0,a.jsx)(h.lG,{open:Z,onOpenChange:F,children:(0,a.jsxs)(h.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(h.c7,{children:[(0,a.jsx)(h.L3,{children:"Edit Product"}),(0,a.jsx)(h.rr,{children:"Make changes to the product details. Click save when you're done."})]}),(0,a.jsx)(k.lV,{...G,children:(0,a.jsxs)("form",{onSubmit:G.handleSubmit(W),className:"space-y-4 py-4",children:[(0,a.jsx)(k.zB,{control:G.control,name:"name",render:e=>{let{field:s}=e;return(0,a.jsxs)(k.eI,{children:[(0,a.jsx)(k.lR,{children:"Product Name"}),(0,a.jsx)(k.MJ,{children:(0,a.jsx)(o.p,{...s})}),(0,a.jsx)(k.C5,{})]})}}),(0,a.jsx)(k.zB,{control:G.control,name:"category",render:e=>{let{field:s}=e;return(0,a.jsxs)(k.eI,{children:[(0,a.jsx)(k.lR,{children:"Category"}),(0,a.jsxs)(m.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(k.MJ,{children:(0,a.jsx)(m.bq,{children:(0,a.jsx)(m.yv,{placeholder:"Select a category"})})}),(0,a.jsx)(m.gC,{children:H.map(e=>(0,a.jsx)(m.eb,{value:e,children:e},e))})]}),(0,a.jsx)(k.C5,{})]})}}),(0,a.jsx)(k.zB,{control:G.control,name:"source",render:e=>{let{field:s}=e;return(0,a.jsxs)(k.eI,{children:[(0,a.jsx)(k.lR,{children:"Source (Supplier)"}),(0,a.jsx)(k.MJ,{children:(0,a.jsx)(o.p,{...s})}),(0,a.jsx)(k.C5,{})]})}}),(0,a.jsx)(k.zB,{control:G.control,name:"price",render:e=>{let{field:s}=e;return(0,a.jsxs)(k.eI,{children:[(0,a.jsx)(k.lR,{children:"Price (â‚¹)"}),(0,a.jsx)(k.MJ,{children:(0,a.jsx)(o.p,{type:"number",...s})}),(0,a.jsx)(k.C5,{})]})}}),(0,a.jsx)(k.zB,{control:G.control,name:"expiryDate",render:e=>{let{field:s}=e;return(0,a.jsxs)(k.eI,{className:"flex flex-col",children:[(0,a.jsx)(k.lR,{children:"Expiry Date"}),(0,a.jsxs)(z.AM,{children:[(0,a.jsx)(z.Wv,{asChild:!0,children:(0,a.jsx)(k.MJ,{children:(0,a.jsxs)(c.$,{variant:"outline",className:(0,f.cn)("pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?(0,J.GP)(s.value,"PPP"):(0,a.jsx)("span",{children:"Pick a date"}),(0,a.jsx)(E.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,a.jsx)(z.hl,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(D.V,{mode:"single",selected:s.value,onSelect:s.onChange,initialFocus:!0})})]}),(0,a.jsx)(k.C5,{})]})}}),(0,a.jsx)(h.Es,{children:(0,a.jsx)(c.$,{type:"submit",disabled:G.formState.isSubmitting,children:G.formState.isSubmitting?"Saving...":"Save Changes"})})]})})]})}),(0,a.jsx)(j,{open:L,onOpenChange:O,children:(0,a.jsxs)(g,{children:[(0,a.jsxs)(v,{children:[(0,a.jsx)(w,{children:"Are you absolutely sure?"}),(0,a.jsxs)(C,{children:["This action cannot be undone. This will permanently delete the product",(0,a.jsxs)("span",{className:"font-semibold",children:[" ",null==U?void 0:U.name]})," (Batch: ",null==U?void 0:U.batchNumber,")."]})]}),(0,a.jsxs)(b,{children:[(0,a.jsx)(S,{onClick:()=>q(null),children:"Cancel"}),(0,a.jsx)(A,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:T,children:"Delete"})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,644,263,417,175,239,979,931,887,706,902,441,684,358],()=>s(60011)),_N_E=e.O()}]);