"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[706],{59434:(e,t,a)=>{a.d(t,{cn:()=>d});var r=a(52596),o=a(39688);function d(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,r.$)(t))}},67785:(e,t,a)=>{a.d(t,{AppContextProvider:()=>_,n:()=>b});var r=a(95155),o=a(12115),d=a(35695),i=a(83013),n=a(23915),s=a(35317),c=a(93004);let u=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyB42kmOLsrT2NDyyyDMS_zgcojoPTirOks",authDomain:"vet-inventory-d0177.firebaseapp.com",projectId:"vet-inventory-d0177",storageBucket:"vet-inventory-d0177.firebasestorage.app",messagingSenderId:"739388322577",appId:"1:739388322577:web:a38efdd781421e6ab992b0"}),y=(0,s.aU)(u),l=(0,c.xI)(u);var m=a(87481),p=a(70831),D=a(78816);let h={CANINE_PLUS:"prod_canine_plus_food_a",FELINE_FINE:"prod_feline_fine_treats_b",RABIES_VAC:"prod_rabies_vaccine_c",LEPTO_VAC:"prod_lepto_vaccine_d",PET_CARRIER:"prod_pet_carrier_e",CHEW_TOY:"prod_chew_toy_f",FLEA_TICK_MED:"prod_flea_tick_med_g",VITAMIN_DROPS:"prod_vitamin_drops_h",GROOM_BRUSH:"prod_grooming_brush_i",NAIL_CLIPPERS:"prod_nail_clippers_j"},M=[{id:h.CANINE_PLUS,name:"Canine Plus Dog Food",category:"Medicines & Pet Foods",batchNumber:"CPDF2024A",source:"Pet Food Inc.",stockInHand:85,itemsSold:15,price:1500,expiryDate:(0,i.GP)((0,p.f)(new Date,365),"yyyy-MM-dd"),receivedLog:[{date:(0,i.GP)((0,D.e)(new Date,45),"yyyy-MM-dd"),quantity:100}]},{id:h.FELINE_FINE,name:"Feline Fine Cat Treats",category:"Medicines & Pet Foods",batchNumber:"FFCT2024B",source:"Pet Food Inc.",stockInHand:180,itemsSold:20,price:350,expiryDate:(0,i.GP)((0,p.f)(new Date,180),"yyyy-MM-dd"),receivedLog:[{date:(0,i.GP)((0,D.e)(new Date,60),"yyyy-MM-dd"),quantity:200}]},{id:h.RABIES_VAC,name:"Rabies Vaccine (1-year)",category:"Vaccines",batchNumber:"RABVAC25A",source:"Vet Pharma",stockInHand:42,itemsSold:8,price:800,expiryDate:(0,i.GP)((0,p.f)(new Date,730),"yyyy-MM-dd"),receivedLog:[{date:(0,i.GP)((0,D.e)(new Date,20),"yyyy-MM-dd"),quantity:50}]},{id:h.LEPTO_VAC,name:"Leptospirosis Vaccine",category:"Vaccines",batchNumber:"LEPVAC25B",source:"Vet Pharma",stockInHand:45,itemsSold:5,price:650,expiryDate:(0,i.GP)((0,p.f)(new Date,25),"yyyy-MM-dd"),receivedLog:[{date:(0,i.GP)((0,D.e)(new Date,20),"yyyy-MM-dd"),quantity:50}]},{id:h.PET_CARRIER,name:"Deluxe Pet Carrier",category:"Accessories",batchNumber:"DPCAR24A",source:"Happy Pets Gear",stockInHand:27,itemsSold:3,price:2500,receivedLog:[{date:(0,i.GP)((0,D.e)(new Date,90),"yyyy-MM-dd"),quantity:30}]},{id:h.CHEW_TOY,name:"Durable Chew Toy",category:"Accessories",batchNumber:"DCTOY24B",source:"Happy Pets Gear",stockInHand:88,itemsSold:12,price:400,receivedLog:[{date:(0,i.GP)((0,D.e)(new Date,15),"yyyy-MM-dd"),quantity:100}]},{id:h.FLEA_TICK_MED,name:"Flea & Tick Prevention",category:"Medicines & Pet Foods",batchNumber:"FTP2024C",source:"Vet Pharma",stockInHand:55,itemsSold:5,price:950,expiryDate:(0,i.GP)((0,p.f)(new Date,400),"yyyy-MM-dd"),receivedLog:[{date:(0,i.GP)((0,D.e)(new Date,35),"yyyy-MM-dd"),quantity:60}]},{id:h.VITAMIN_DROPS,name:"Multi-Vitamin Drops",category:"Medicines & Pet Foods",batchNumber:"MVD2024D",source:"Vet Pharma",stockInHand:68,itemsSold:7,price:550,expiryDate:(0,i.GP)((0,p.f)(new Date,15),"yyyy-MM-dd"),receivedLog:[{date:(0,i.GP)((0,D.e)(new Date,40),"yyyy-MM-dd"),quantity:75}]},{id:h.GROOM_BRUSH,name:"Grooming Brush",category:"Accessories",batchNumber:"GRB24C",source:"Happy Pets Gear",stockInHand:35,itemsSold:15,price:700,receivedLog:[{date:(0,i.GP)((0,D.e)(new Date,10),"yyyy-MM-dd"),quantity:50}]},{id:h.NAIL_CLIPPERS,name:"Nail Clippers",category:"Accessories",batchNumber:"NLC24D",source:"Happy Pets Gear",stockInHand:42,itemsSold:8,price:600,receivedLog:[{date:(0,i.GP)((0,D.e)(new Date,25),"yyyy-MM-dd"),quantity:50}]}],P=[{productId:h.CANINE_PLUS,productName:"Canine Plus Dog Food",customerName:"Ravi Kumar",quantity:1,saleDate:(0,i.GP)(new Date,"yyyy-MM-dd"),totalAmount:1500},{productId:h.CHEW_TOY,productName:"Durable Chew Toy",customerName:"Priya Sharma",quantity:2,saleDate:(0,i.GP)(new Date,"yyyy-MM-dd"),totalAmount:800},{productId:h.FELINE_FINE,productName:"Feline Fine Cat Treats",customerName:"Anjali Verma",quantity:3,saleDate:(0,i.GP)((0,D.e)(new Date,1),"yyyy-MM-dd"),totalAmount:1050},{productId:h.RABIES_VAC,productName:"Rabies Vaccine (1-year)",customerName:"Suresh Gupta",quantity:1,saleDate:(0,i.GP)((0,D.e)(new Date,1),"yyyy-MM-dd"),totalAmount:800},{productId:h.GROOM_BRUSH,productName:"Grooming Brush",customerName:"Anjali Verma",quantity:1,saleDate:(0,i.GP)((0,D.e)(new Date,1),"yyyy-MM-dd"),totalAmount:700},{productId:h.CANINE_PLUS,productName:"Canine Plus Dog Food",customerName:"Amit Singh",quantity:5,saleDate:(0,i.GP)((0,D.e)(new Date,3),"yyyy-MM-dd"),totalAmount:7500},{productId:h.PET_CARRIER,productName:"Deluxe Pet Carrier",customerName:"Sunita Rao",quantity:1,saleDate:(0,i.GP)((0,D.e)(new Date,4),"yyyy-MM-dd"),totalAmount:2500},{productId:h.NAIL_CLIPPERS,productName:"Nail Clippers",customerName:"Vikram Mehta",quantity:1,saleDate:(0,i.GP)((0,D.e)(new Date,5),"yyyy-MM-dd"),totalAmount:600},{productId:h.FELINE_FINE,productName:"Feline Fine Cat Treats",customerName:"Rina Desai",quantity:10,saleDate:(0,i.GP)((0,D.e)(new Date,6),"yyyy-MM-dd"),totalAmount:3500},{productId:h.LEPTO_VAC,productName:"Leptospirosis Vaccine",customerName:"Deepak Kumar",quantity:2,saleDate:(0,i.GP)((0,D.e)(new Date,7),"yyyy-MM-dd"),totalAmount:1300},{productId:h.CHEW_TOY,productName:"Durable Chew Toy",customerName:"Amit Singh",quantity:5,saleDate:(0,i.GP)((0,D.e)(new Date,8),"yyyy-MM-dd"),totalAmount:2e3},{productId:h.VITAMIN_DROPS,productName:"Multi-Vitamin Drops",customerName:"Priya Sharma",quantity:2,saleDate:(0,i.GP)((0,D.e)(new Date,9),"yyyy-MM-dd"),totalAmount:1100},{productId:h.FLEA_TICK_MED,productName:"Flea & Tick Prevention",customerName:"Ravi Kumar",quantity:1,saleDate:(0,i.GP)((0,D.e)(new Date,10),"yyyy-MM-dd"),totalAmount:950},{productId:h.GROOM_BRUSH,productName:"Grooming Brush",customerName:"Sunita Rao",quantity:3,saleDate:(0,i.GP)((0,D.e)(new Date,12),"yyyy-MM-dd"),totalAmount:2100},{productId:h.CANINE_PLUS,productName:"Canine Plus Dog Food",customerName:"Vikram Mehta",quantity:3,saleDate:(0,i.GP)((0,D.e)(new Date,15),"yyyy-MM-dd"),totalAmount:4500},{productId:h.RABIES_VAC,productName:"Rabies Vaccine (1-year)",customerName:"Rina Desai",quantity:5,saleDate:(0,i.GP)((0,D.e)(new Date,18),"yyyy-MM-dd"),totalAmount:4e3},{productId:h.FELINE_FINE,productName:"Feline Fine Cat Treats",customerName:"Suresh Gupta",quantity:5,saleDate:(0,i.GP)((0,D.e)(new Date,20),"yyyy-MM-dd"),totalAmount:1750},{productId:h.NAIL_CLIPPERS,productName:"Nail Clippers",customerName:"Deepak Kumar",quantity:4,saleDate:(0,i.GP)((0,D.e)(new Date,22),"yyyy-MM-dd"),totalAmount:2400},{productId:h.CHEW_TOY,productName:"Durable Chew Toy",customerName:"Anjali Verma",quantity:5,saleDate:(0,i.GP)((0,D.e)(new Date,25),"yyyy-MM-dd"),totalAmount:2e3},{productId:h.PET_CARRIER,productName:"Deluxe Pet Carrier",customerName:"Amit Singh",quantity:2,saleDate:(0,i.GP)((0,D.e)(new Date,28),"yyyy-MM-dd"),totalAmount:5e3}],N=[{name:"Ravi Kumar",phoneNumber:"9876543210",whatsappNumber:"9876543210",email:"ravi.k@example.com",pets:[{species:"Dog",breed:"Labrador Retriever",count:1}]},{name:"Priya Sharma",phoneNumber:"9876543211",email:"priya.s@example.com",pets:[{species:"Cat",breed:"Siamese",count:2},{species:"Dog",breed:"Golden Retriever",count:1}]},{name:"Anjali Verma",phoneNumber:"9876543212",whatsappNumber:"9876543212",email:"anjali.v@example.com",pets:[{species:"Cat",breed:"Persian",count:1}]},{name:"Suresh Gupta",phoneNumber:"9876543213",pets:[{species:"Dog",breed:"German Shepherd",count:1}]},{name:"Amit Singh",phoneNumber:"9876543214",email:"amit.s@example.com",pets:[{species:"Dog",breed:"Pug",count:2}]},{name:"Sunita Rao",phoneNumber:"9876543215",pets:[{species:"Dog",breed:"Beagle",count:1}]},{name:"Vikram Mehta",phoneNumber:"9876543216",email:"vikram.m@example.com",pets:[{species:"Parrot",breed:"Macaw",count:2}]},{name:"Rina Desai",phoneNumber:"9876543217",pets:[{species:"Cat",breed:"Maine Coon",count:1}]},{name:"Deepak Kumar",phoneNumber:"9876543218",whatsappNumber:"9876543218",pets:[{species:"Rabbit",breed:"Holland Lop",count:3}]}];async function I(e){let t=(0,s.wP)(e);M.forEach(a=>{let{id:r,...o}=a,d=(0,s.H9)(e,"products",r);t.set(d,o)}),P.forEach(a=>{let r=(0,s.H9)((0,s.rJ)(e,"sales"));t.set(r,a)}),N.forEach(a=>{let r=(0,s.H9)((0,s.rJ)(e,"customers"));t.set(r,a)});try{await t.commit(),console.log("Database seeded successfully!")}catch(e){throw console.error("Error seeding database:",e),Error("Failed to seed database.")}}let E=(0,o.createContext)(void 0);function _(e){let{children:t}=e,[a,n]=(0,o.useState)([]),[u,p]=(0,o.useState)([]),[D,h]=(0,o.useState)([]),[M,P]=(0,o.useState)(!0),[N,_]=(0,o.useState)(null),[b,A]=(0,o.useState)(!1),{toast:C}=(0,m.dj)(),S=(0,d.useRouter)(),w=(0,d.usePathname)();(0,o.useEffect)(()=>{let e=(0,c.hg)(l,e=>{_(e),A(!0),e||(n([]),p([]),h([]),P(!1))});return()=>e()},[]),(0,o.useEffect)(()=>{if(b){let e="/login"===w;N||e?N&&e&&S.push("/"):S.push("/login")}},[N,b,w,S]),(0,o.useEffect)(()=>{if(!N)return;P(!0);let e=(0,s.rJ)(y,"products");(0,s.GG)(e).then(async e=>{e.empty&&(console.log("Empty database detected, seeding with mock data..."),C({title:"Welcome!",description:"Setting up sample data for you..."}),await I(y),C({title:"Setup Complete!",description:"Sample data has been added to your database."}))});let t=(0,s.P)((0,s.rJ)(y,"products"),(0,s.My)("name","asc")),a=(0,s.aQ)(t,e=>{n(e.docs.map(e=>({id:e.id,...e.data()}))),P(!1)},e=>{console.error("Error fetching products: ",e),C({variant:"destructive",title:"Database Error",description:"Could not fetch products."}),P(!1)}),r=(0,s.P)((0,s.rJ)(y,"sales"),(0,s.My)("saleDate","desc")),o=(0,s.aQ)(r,e=>{p(e.docs.map(e=>({id:e.id,...e.data()})))},e=>{console.error("Error fetching sales: ",e),C({variant:"destructive",title:"Database Error",description:"Could not fetch sales."})}),d=(0,s.P)((0,s.rJ)(y,"customers"),(0,s.My)("name","asc")),i=(0,s.aQ)(d,e=>{h(e.docs.map(e=>({id:e.id,...e.data()})))},e=>{console.error("Error fetching customers: ",e),C({variant:"destructive",title:"Database Error",description:"Could not fetch customers."})});return()=>{a(),o(),i()}},[N,C]);let g=(0,o.useCallback)(async(e,t)=>{await (0,c.x9)(l,e,t)},[]),v=(0,o.useCallback)(async()=>{await (0,c.CI)(l)},[]),f=(0,o.useCallback)(async e=>{try{await (0,s.gS)((0,s.rJ)(y,"products"),{name:e.name,category:e.category,source:e.source,batchNumber:e.batchNumber,price:e.price,expiryDate:e.expiryDate,stockInHand:e.initialStock,itemsSold:0,receivedLog:[{date:(0,i.GP)(new Date,"yyyy-MM-dd"),quantity:e.initialStock}]})}catch(e){console.error("Error adding product: ",e),C({variant:"destructive",title:"Error",description:"Could not add the new product."})}},[C]),G=(0,o.useCallback)(async(e,t,r)=>{let o=(0,s.H9)(y,"products",e);try{let d=a.find(t=>t.id===e);if(!d)throw Error("Product not found");let n=[...d.receivedLog,{date:(0,i.GP)(r,"yyyy-MM-dd"),quantity:t}];await (0,s.mZ)(o,{stockInHand:(0,s.GV)(t),receivedLog:n})}catch(e){console.error("Error adding stock: ",e),C({variant:"destructive",title:"Error",description:"Could not update the stock."})}},[a,C]),T=(0,o.useCallback)(async e=>{let t=(0,s.wP)(y);for(let r of e.items){let o=a.find(e=>e.id===r.productId);if(!o)throw Error("Product with ID ".concat(r.productId," not found."));if(o.stockInHand<r.quantity)throw Error("Not enough stock for ".concat(o.name,". Only ").concat(o.stockInHand," available."));let d=(0,s.H9)((0,s.rJ)(y,"sales")),n={productId:r.productId,productName:o.name,customerName:e.customerName,quantity:r.quantity,saleDate:(0,i.GP)(e.saleDate,"yyyy-MM-dd"),totalAmount:o.price*r.quantity};t.set(d,n);let c=(0,s.H9)(y,"products",r.productId);t.update(c,{stockInHand:(0,s.GV)(-r.quantity),itemsSold:(0,s.GV)(r.quantity)})}try{await t.commit()}catch(e){throw console.error("Error recording bulk sale: ",e),C({variant:"destructive",title:"Error",description:"Failed to record the sale. The transaction was rolled back."}),e}},[a,C]),R=(0,o.useCallback)(async e=>{try{await (0,s.gS)((0,s.rJ)(y,"customers"),e)}catch(e){throw console.error("Error adding customer: ",e),C({variant:"destructive",title:"Error",description:"Could not add the new customer."}),e}},[C]),k=(0,o.useCallback)(async(e,t)=>{let a=(0,s.H9)(y,"products",e);try{await (0,s.mZ)(a,t),C({title:"Product Updated",description:"The product details have been saved."})}catch(e){throw console.error("Error updating product: ",e),C({variant:"destructive",title:"Error",description:"Could not update the product."}),e}},[C]),L=(0,o.useCallback)(async e=>{let t=a.find(t=>t.id===e);if(t&&t.itemsSold>0)return void C({variant:"destructive",title:"Deletion Failed",description:"Cannot delete a product with a sales history."});let r=(0,s.H9)(y,"products",e);try{await (0,s.kd)(r),C({title:"Product Deleted",description:"The product has been removed from inventory."})}catch(e){throw console.error("Error deleting product: ",e),C({variant:"destructive",title:"Error",description:"Could not delete the product."}),e}},[a,C]),F=(0,o.useCallback)(e=>{let t=(0,i.GP)(e,"yyyy-MM-dd");return u.filter(e=>e.saleDate===t)},[u]),V=(0,o.useMemo)(()=>({products:a,sales:u,customers:D,isLoading:M,appInitialized:b,user:N,addProduct:f,addStock:G,addBulkSale:T,addCustomer:R,getDailySales:F,signIn:g,logOut:v,updateProduct:k,deleteProduct:L}),[a,u,D,M,b,N,f,G,T,R,F,g,v,k,L]);return(0,r.jsx)(E.Provider,{value:V,children:t})}function b(){let e=(0,o.useContext)(E);if(!e)throw Error("useApp must be used within an AppContextProvider");return e}},87481:(e,t,a)=>{a.d(t,{dj:()=>l});var r=a(12115);let o=0,d=new Map,i=e=>{if(d.has(e))return;let t=setTimeout(()=>{d.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);d.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},s=[],c={toasts:[]};function u(e){c=n(c,e),s.forEach(e=>{e(c)})}function y(e){let{...t}=e,a=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>u({type:"DISMISS_TOAST",toastId:a});return u({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function l(){let[e,t]=r.useState(c);return r.useEffect(()=>(s.push(t),()=>{let e=s.indexOf(t);e>-1&&s.splice(e,1)}),[e]),{...e,toast:y,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}}}]);