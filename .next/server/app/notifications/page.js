(()=>{var e={};e.id=173,e.ids=[173],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},5798:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>l});var s=r(65239),i=r(48088),a=r(88170),n=r.n(a),o=r(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l={children:["",{children:["notifications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,63555)),"D:\\Inventory Mgmt\\studio\\src\\app\\notifications\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"D:\\Inventory Mgmt\\studio\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["D:\\Inventory Mgmt\\studio\\src\\app\\notifications\\page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/notifications/page",pathname:"/notifications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},7252:e=>{"use strict";e.exports=require("express")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30021:(e,t,r)=>{"use strict";r.d(t,{default:()=>b});var s=r(60687),i=r(43210),a=r.n(i),n=r(30212),o=r(6475);let d=(0,o.createServerReference)("40877789207f2fd0bfa94b4b604b227aef05f5b287",o.callServer,void 0,o.findSourceMapURL,"generateExpiryNotification");var l=r(44493),u=r(29523),c=r(91821),p=r(64181),m=r(14975),f=r(24555),x=r(11516),g=r(58261),h=r(89106),v=r(47138);function N(e,t){let r=(0,v.a)(e),s=(0,v.a)(t),i=y(r,s),a=Math.abs((0,h.m)(r,s));r.setDate(r.getDate()-i*a);let n=Number(y(r,s)===-i),o=i*(a-n);return 0===o?0:o}function y(e,t){let r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function b(){let{products:e}=(0,n.n)(),[t,r]=(0,i.useState)({}),o=a().useMemo(()=>{let t=new Date;return e.filter(e=>{if(!e.expiryDate)return!1;let r=N((0,g.H)(e.expiryDate),t);return r<=30&&r>=0}).sort((e,t)=>new Date(e.expiryDate).getTime()-new Date(t.expiryDate).getTime())},[e]),h=async e=>{if(e.expiryDate){r(t=>({...t,[e.id]:{isLoading:!0,message:null,error:null}}));try{let t=await d({productType:e.category,productName:e.name,quantity:e.stockInHand,expiryDate:e.expiryDate});r(r=>({...r,[e.id]:{isLoading:!1,message:t.notificationMessage,error:null}}))}catch(t){console.error(t),r(t=>({...t,[e.id]:{isLoading:!1,message:null,error:"Failed to generate notification."}}))}}};return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.A,{className:"h-6 w-6"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Expiry Notifications"})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Products that are expiring within the next 30 days are shown here."}),o.length>0?(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(e=>{let r=N((0,g.H)(e.expiryDate),new Date),i=t[e.id];return(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsxs)(l.ZB,{className:"flex items-start justify-between",children:[e.name,(0,s.jsxs)("div",{className:"flex items-center text-sm font-medium text-destructive",children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mr-1.5"}),r," days left"]})]}),(0,s.jsxs)(l.BT,{children:[e.stockInHand," items in stock. Expires on ",e.expiryDate,"."]})]}),(0,s.jsxs)(l.Wu,{children:[i?.message&&(0,s.jsxs)(c.Fc,{variant:"default",className:"bg-primary/10",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 text-primary"}),(0,s.jsx)(c.XL,{className:"text-primary",children:"Generated Reminder"}),(0,s.jsx)(c.TN,{children:i.message})]}),i?.error&&(0,s.jsxs)(c.Fc,{variant:"destructive",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),(0,s.jsx)(c.XL,{children:"Error"}),(0,s.jsx)(c.TN,{children:i.error})]})]}),(0,s.jsx)(l.wL,{children:(0,s.jsxs)(u.$,{onClick:()=>h(e),disabled:i?.isLoading,className:"w-full",children:[i?.isLoading?(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Generate Reminder"]})})]},e.id)})}):(0,s.jsx)(l.Zp,{className:"flex flex-col items-center justify-center py-20",children:(0,s.jsxs)(l.Wu,{className:"text-center",children:[(0,s.jsx)(p.A,{className:"h-12 w-12 mx-auto text-muted-foreground"}),(0,s.jsx)("h3",{className:"mt-4 text-lg font-medium",children:"All Clear!"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"No products are expiring soon."})]})})]})}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37830:e=>{"use strict";e.exports=require("node:stream/web")},44493:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>u,ZB:()=>d,Zp:()=>n,aR:()=>o,wL:()=>c});var s=r(60687),i=r(43210),a=r(4780);let n=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let o=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let d=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let l=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let u=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...t}));u.displayName="CardContent";let c=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t}));c.displayName="CardFooter"},44708:e=>{"use strict";e.exports=require("node:https")},47002:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=47002,e.exports=t},50101:(e,t,r)=>{Promise.resolve().then(r.bind(r,63665))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},58261:(e,t,r)=>{"use strict";r.d(t,{H:()=>i});var s=r(11392);function i(e,t){let r,i,m=t?.additionalDigits??2,f=function(e){let t,r={},s=e.split(a.dateTimeDelimiter);if(s.length>2)return r;if(/:/.test(s[0])?t=s[0]:(r.date=s[0],t=s[1],a.timeZoneDelimiter.test(r.date)&&(r.date=e.split(a.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){let e=a.timezone.exec(t);e?(r.time=t.replace(e[1],""),r.timezone=e[1]):r.time=t}return r}(e);if(f.date){let e=function(e,t){let r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(r);if(!s)return{year:NaN,restDateString:""};let i=s[1]?parseInt(s[1]):null,a=s[2]?parseInt(s[2]):null;return{year:null===a?i:100*a,restDateString:e.slice((s[1]||s[2]).length)}}(f.date,m);r=function(e,t){var r,s,i,a,o,d,u,m;if(null===t)return new Date(NaN);let f=e.match(n);if(!f)return new Date(NaN);let x=!!f[4],g=l(f[1]),h=l(f[2])-1,v=l(f[3]),N=l(f[4]),y=l(f[5])-1;if(x){return(r=0,s=N,i=y,s>=1&&s<=53&&i>=0&&i<=6)?function(e,t,r){let s=new Date(0);s.setUTCFullYear(e,0,4);let i=s.getUTCDay()||7;return s.setUTCDate(s.getUTCDate()+((t-1)*7+r+1-i)),s}(t,N,y):new Date(NaN)}{let e=new Date(0);return(a=t,o=h,d=v,o>=0&&o<=11&&d>=1&&d<=(c[o]||(p(a)?29:28))&&(u=t,(m=g)>=1&&m<=(p(u)?366:365)))?(e.setUTCFullYear(t,h,Math.max(g,v)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let x=r.getTime(),g=0;if(f.time&&isNaN(g=function(e){var t,r,i;let a=e.match(o);if(!a)return NaN;let n=u(a[1]),d=u(a[2]),l=u(a[3]);return(t=n,r=d,i=l,24===t?0===r&&0===i:i>=0&&i<60&&r>=0&&r<60&&t>=0&&t<25)?n*s.s0+d*s.Cg+1e3*l:NaN}(f.time)))return new Date(NaN);if(f.timezone){if(isNaN(i=function(e){var t,r;if("Z"===e)return 0;let i=e.match(d);if(!i)return 0;let a="+"===i[1]?-1:1,n=parseInt(i[2]),o=i[3]&&parseInt(i[3])||0;return(t=0,(r=o)>=0&&r<=59)?a*(n*s.s0+o*s.Cg):NaN}(f.timezone)))return new Date(NaN)}else{let e=new Date(x+g),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(x+g+i)}let a={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},n=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,o=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(e){return e?parseInt(e):1}function u(e){return e&&parseFloat(e.replace(",","."))||0}let c=[31,null,31,30,31,30,31,31,30,31,30,31];function p(e){return e%400==0||e%4==0&&e%100!=0}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63555:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(37413),i=r(63665);function a(){return(0,s.jsx)(i.default,{})}},63665:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Inventory Mgmt\\\\studio\\\\src\\\\components\\\\pages\\\\notifications.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Inventory Mgmt\\studio\\src\\components\\pages\\notifications.tsx","default")},63669:(e,t,r)=>{Promise.resolve().then(r.bind(r,30021))},67327:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"40877789207f2fd0bfa94b4b604b227aef05f5b287":()=>l});var s=r(91199);r(42087);var i=r(95427),a=r(37612),n=r(33331);let o=a.z.object({productType:a.z.string().describe("The type of product nearing expiration (e.g., medicine, pet food)."),productName:a.z.string().describe("The name of the product nearing expiration."),quantity:a.z.number().describe("The quantity of the product nearing expiration."),expiryDate:a.z.string().describe("The expiry date of the product (YYYY-MM-DD).")}),d=a.z.object({notificationMessage:a.z.string().describe("A tailored notification message for the expiring product.")});async function l(e){return c(e)}let u=i.ai.definePrompt({name:"generateExpiryNotificationPrompt",input:{schema:o},output:{schema:d},prompt:`You are an inventory management assistant. Generate a notification message to inform the user that a product is nearing its expiration date.

Product Type: {{productType}}
Product Name: {{productName}}
Quantity: {{quantity}}
Expiry Date: {{expiryDate}}

Compose a concise and informative notification message.`}),c=i.ai.defineFlow({name:"generateExpiryNotificationFlow",inputSchema:o,outputSchema:d},async e=>{let{output:t}=await u(e);return t});(0,n.D)([l]),(0,s.A)(l,"40877789207f2fd0bfa94b4b604b227aef05f5b287",null)},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(31658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},91645:e=>{"use strict";e.exports=require("net")},91821:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>d,TN:()=>u,XL:()=>l});var s=r(60687),i=r(43210),a=r(24224),n=r(4780);let o=(0,a.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=i.forwardRef(({className:e,variant:t,...r},i)=>(0,s.jsx)("div",{ref:i,role:"alert",className:(0,n.cn)(o({variant:t}),e),...r}));d.displayName="Alert";let l=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h5",{ref:r,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));l.displayName="AlertTitle";let u=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...t}));u.displayName="AlertDescription"},94735:e=>{"use strict";e.exports=require("events")},95427:(e,t,r)=>{"use strict";r.d(t,{ai:()=>a});var s=r(37612),i=r(56758);let a=(0,s.genkit)({plugins:[(0,i.YF)()],model:"googleai/gemini-2.0-flash"})}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,120,658,34,827],()=>r(5798));module.exports=s})();